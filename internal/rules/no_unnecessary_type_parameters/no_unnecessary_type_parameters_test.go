package no_unnecessary_type_parameters

import (
	"testing"

	"github.com/typescript-eslint/tsgolint/internal/rule_tester"
	"github.com/typescript-eslint/tsgolint/internal/rules/fixtures"
)

func TestNoUnnecessaryTypeParameters(t *testing.T) {
	t.Parallel()
	rule_tester.RunRuleTester(fixtures.GetRootDir(), "tsconfig.json", t, &NoUnnecessaryTypeParametersRule, []rule_tester.ValidTestCase{
		{Code: "\n      class ClassyArray<T> {\n        arr: T[];\n      }\n    "},
		{Code: "\n      class ClassyArray<T> {\n        value1: T;\n        value2: T;\n      }\n    "},
		{Code: "\n      class ClassyArray<T> {\n        arr: T[];\n        constructor(arr: T[]) {\n          this.arr = arr;\n        }\n      }\n    "},
		{Code: "\n      class ClassyArray<T> {\n        arr: T[];\n        workWith(value: T) {\n          this.arr.indexOf(value);\n        }\n      }\n    "},
		{Code: "\n      abstract class ClassyArray<T> {\n        arr: T[];\n        abstract workWith(value: T): void;\n      }\n    "},
		{Code: "\n      class Box<T> {\n        val: T | null = null;\n        get() {\n          return this.val;\n        }\n      }\n    "},
		{Code: "\n      class Joiner<T extends string | number> {\n        join(els: T[]) {\n          return els.map(el => '' + el).join(',');\n        }\n      }\n    "},
		{Code: "\n      interface Base<T> {}\n      class Derived<T> implements Base<T> {\n        value: T;\n      }\n    "},
		{Code: "\n      declare class Foo {\n        getProp<T>(this: Record<'prop', T>): T;\n      }\n    "},
		{Code: "type Fn = <T>(input: T) => T;"},
		{Code: "type Fn = <T extends string>(input: T) => T;"},
		{Code: "type Fn = <T extends string>(input: T) => `a${T}b`;"},
		{Code: "type Fn = new <T>(input: T) => T;"},
		{Code: "type Fn = <T>(input: T) => typeof input;"},
		{Code: "type Fn = <T>(input: T) => keyof typeof input;"},
		{Code: "type Fn = <T>(input: Partial<T>) => typeof input;"},
		{Code: "type Fn = <T>(input: Partial<T>) => input is T;"},
		{Code: "type Fn = <T>(input: T) => { [K in keyof T]: K };"},
		{Code: "type Fn = <T>(input: T) => { [K in keyof T as K]: string };"},
		{Code: "type Fn = <T>(input: T) => { [K in keyof T as `${K & string}`]: string };"},
		{Code: "type Fn = <T>(input: T) => Partial<T>;"},
		{Code: "type Fn = <T>(input: { [i: number]: T }) => T;"},
		{Code: "type Fn = <T>(input: { [i: number]: T }) => Partial<T>;"},
		{Code: "type Fn = <T>(input: { [i: string]: T }) => Partial<T>;"},
		{Code: "type Fn = <T>(input: T) => { [i: number]: T };"},
		{Code: "type Fn = <T>(input: T) => { [i: string]: T };"},
		{Code: "type Fn = <T extends unknown[]>(input: T) => Omit<T, 'length'>;"},
		{Code: "\n      interface I {\n        <T>(value: T): T;\n      }\n    "},
		{Code: "\n      interface I {\n        new <T>(value: T): T;\n      }\n    "},
		{Code: "\n      function identity<T>(arg: T): T {\n        return arg;\n      }\n    "},
		{Code: "\n      function printProperty<T>(obj: T, key: keyof T) {\n        console.log(obj[key]);\n      }\n    "},
		{Code: "\n      function getProperty<T, K extends keyof T>(obj: T, key: K) {\n        return obj[key];\n      }\n    "},
		{Code: "\n      function box<T>(val: T) {\n        return { val };\n      }\n    "},
		{Code: "\n      function doStuff<K, V>(map: Map<K, V>, key: K) {\n        let v = map.get(key);\n        v = 1;\n        map.set(key, v);\n        return v;\n      }\n    "},
		{Code: "\n      function makeMap<K, V>() {\n        return new Map<K, V>();\n      }\n    "},
		{Code: "\n      function makeMap<K, V>(ks: K[], vs: V[]) {\n        const r = new Map<K, V>();\n        ks.forEach((k, i) => {\n          r.set(k, vs[i]);\n        });\n        return r;\n      }\n    "},
		{Code: "\n      function arrayOfPairs<T>() {\n        return [] as [T, T][];\n      }\n    "},
		{Code: "\n      function isNonNull<T>(v: T): v is Exclude<T, null> {\n        return v !== null;\n      }\n    "},
		{Code: "\n      function both<Args extends unknown[]>(\n        fn1: (...args: Args) => void,\n        fn2: (...args: Args) => void,\n      ): (...args: Args) => void {\n        return function (...args: Args) {\n          fn1(...args);\n          fn2(...args);\n        };\n      }\n    "},
		{Code: "\n      function lengthyIdentity<T extends { length: number }>(x: T) {\n        return x;\n      }\n    "},
		{Code: "\n      interface Lengthy {\n        length: number;\n      }\n      function lengthyIdentity<T extends Lengthy>(x: T) {\n        return x;\n      }\n    "},
		{Code: "\n      function ItemComponent<T>(props: { item: T; onSelect: (item: T) => void }) {}\n    "},
		{Code: "\n      interface ItemProps<T> {\n        item: readonly T;\n        onSelect: (item: T) => void;\n      }\n      function ItemComponent<T>(props: ItemProps<T>) {}\n    "},
		{Code: "\n      function useFocus<T extends HTMLOrSVGElement>(): [\n        React.RefObject<T>,\n        () => void,\n      ];\n    "},
		{Code: "\n      function findFirstResult<U>(\n        inputs: unknown[],\n        getResult: (t: unknown) => U | undefined,\n      ): U | undefined;\n    "},
		{Code: "\n      function findFirstResult<T, U>(\n        inputs: T[],\n        getResult: (t: T) => () => [U | undefined],\n      ): () => [U | undefined];\n    "},
		{Code: "\n      function getData<T>(url: string): Promise<T | null> {\n        return Promise.resolve(null);\n      }\n    "},
		{Code: "\n      function getData<T>(url: string): Promise<T extends null ? T : null> {\n        return Promise.resolve(null);\n      }\n    "},
		{Code: "\n      function getData<T extends string>(url: string): Promise<`a${T}b`> {\n        return Promise.resolve(null);\n      }\n    "},
		{Code: "\n      async function getData<T>(url: string): Promise<T | null> {\n        return null;\n      }\n    "},
		{Code: "declare function get(): void;"},
		{Code: "declare function get<T>(param: T[]): T;"},
		{Code: "declare function box<T>(val: T): { val: T };"},
		{Code: "declare function identity<T>(param: T): T;"},
		{Code: "declare function compare<T>(param1: T, param2: T): boolean;"},
		{Code: "declare function example<T>(a: Set<T>): T;"},
		{Code: "declare function example<T>(a: Set<T>, b: T[]): void;"},
		{Code: "declare function example<T>(a: Map<T, T>): void;"},
		{Code: "declare function example<T, U extends T>(t: T, u: U): U;"},
		{Code: "declare function makeSet<K>(): Set<K>;"},
		{Code: "declare function makeSet<K>(): [Set<K>];"},
		{Code: "declare function makeSets<K>(): Set<K>[];"},
		{Code: "declare function makeSets<K>(): [Set<K>][];"},
		{Code: "declare function makeMap<K, V>(): Map<K, V>;"},
		{Code: "declare function makeMap<K, V>(): [Map<K, V>];"},
		{Code: "declare function makeArray<T>(): T[];"},
		{Code: "declare function makeArrayNullish<T>(): (T | null)[];"},
		{Code: "declare function makeTupleMulti<T>(): [T | null, T | null];"},
		{Code: "declare function takeTupleMulti<T>(input: [T, T]): void;"},
		{Code: "declare function takeTupleMultiNullish<T>(input: [T | null, T | null]): void;"},
		{Code: "declare function arrayOfPairs<T>(): [T, T][];"},
		{Code: "declare function fetchJson<T>(url: string): Promise<T>;"},
		{Code: "declare function fetchJsonTuple<T>(url: string): Promise<[T]>;"},
		{Code: "declare function fn<T>(input: T): 0 extends 0 ? T : never;"},
		{Code: "declare function useFocus<T extends HTMLOrSVGElement>(): [React.RefObject<T>];"},
		{Code: "\n      declare function useFocus<T extends HTMLOrSVGElement>(): {\n        ref: React.RefObject<T>;\n      };\n    "},
		{Code: "\n      interface TwoMethods<T> {\n        a(x: T): void;\n        b(x: T): void;\n      }\n\n      declare function two<T>(props: TwoMethods<T>): void;\n    "},
		{Code: "\n      type Obj = { a: string };\n\n      declare function hasOwnProperty<K extends keyof Obj>(\n        obj: Obj,\n        key: K,\n      ): obj is Obj & { [key in K]-?: Obj[key] };\n    "},
		{Code: "\n      type AsMutable<T extends readonly unknown[]> = {\n        -readonly [Key in keyof T]: T[Key];\n      };\n\n      declare function makeMutable<T>(input: T): MakeMutable<T>;\n    "},
		{Code: "\n      type AsMutable<T extends readonly unknown[]> = {\n        -readonly [Key in keyof T]: T[Key];\n      };\n\n      declare function makeMutable<T>(input: T): MakeMutable<typeof input>;\n    "},
		{Code: "\n      type ValueNulls<U extends string> = {} & {\n        [P in U]: null;\n      };\n\n      declare function invert<T extends string>(obj: T): ValueNulls<T>;\n    "},
		{Code: "\n      interface Middle {\n        inner: boolean;\n      }\n\n      type Conditional<T extends Middle> = {} & (T['inner'] extends true ? {} : {});\n\n      function withMiddle<T extends Middle = Middle>(options: T): Conditional<T> {\n        return options;\n      }\n    "},
		{Code: "\n\n      declare function forEachReturnStatement<T>(\n        body: ts.Block,\n        visitor: (stmt: ts.ReturnStatement) => T,\n      ): T | undefined;\n    "},
		{Code: "\n\n      declare const isNodeOfType: <NodeType extends AST_NODE_TYPES>(\n        nodeType: NodeType,\n      ) => node is Extract<TSESTree.Node, { type: NodeType }>;\n    "},
		{Code: "\n\n      const isNodeOfType =\n        <NodeType extends AST_NODE_TYPES>(nodeType: NodeType) =>\n        (\n          node: TSESTree.Node | null,\n        ): node is Extract<TSESTree.Node, { type: NodeType }> =>\n          node?.type === nodeType;\n    "},
		{Code: "\n\n      export const isNotTokenOfTypeWithConditions =\n        <\n          TokenType extends AST_TOKEN_TYPES,\n          ExtractedToken extends Extract<TSESTree.Token, { type: TokenType }>,\n          Conditions extends Partial<ExtractedToken>,\n        >(\n          tokenType: TokenType,\n          conditions: Conditions,\n        ): ((\n          token: TSESTree.Token | null | undefined,\n        ) => token is Exclude<TSESTree.Token, Conditions & ExtractedToken>) =>\n        (token): token is Exclude<TSESTree.Token, Conditions & ExtractedToken> =>\n          tokenType in conditions;\n    "},
		{Code: "\n      type Foo<T, S> = S extends 'somebody'\n        ? T extends 'once'\n          ? 'told'\n          : 'me'\n        : never;\n\n      declare function foo<T>(data: T): <S>(other: S) => Foo<T, S>;\n    "},
		{Code: "\n      type Foo<T, S> = S extends 'somebody'\n        ? T extends 'once'\n          ? 'told'\n          : 'me'\n        : never;\n\n      declare function foo<T>(data: T): <S>(other: S) => Foo<S, T>;\n    "},
		{Code: "\n      declare function mapObj<K extends string, V>(\n        obj: { [key in K]?: V },\n        fn: (key: K, val: V) => number,\n      ): number[];\n    "},
		{Code: "\n      declare function mappedReturnType<T extends string>(\n        x: T,\n      ): { [K in T]: Capitalize<K> };\n\n      function inferredMappedReturnType<T extends string>(x: T) {\n        return mappedReturnType(x);\n      }\n    "},
		{Code: "\n      declare function mappedReturnType<T extends string>(\n        x: T,\n      ): { [K in T]: Capitalize<K> };\n\n      function inferredMappedReturnType<T extends string>(x: T) {\n        return () => mappedReturnType(x);\n      }\n    "},
		{Code: "\n      declare function mappedReturnType<T extends string>(\n        x: T,\n      ): { [K in T]: Capitalize<K> };\n\n      function inferredMappedReturnType<T extends string>(x: T) {\n        return [{ value: () => mappedReturnType(x) }];\n      }\n    "},
		{Code: "\ntype Identity<T> = T;\n\ntype Mapped<T, Value> = Identity<{ [P in keyof T]: Value }>;\n\ndeclare function sillyFoo<Data, Value>(\n  c: Value,\n): (data: Data) => Mapped<Data, Value>;\n    "},
		{Code: "\ntype Silly<T> = { [P in keyof T]: T[P] };\n\ntype SillyFoo<T, Value> = Silly<{ [P in keyof T]: Value }>;\n\ntype Foo<T, Value> = { [P in keyof T]: Value };\n\ndeclare function foo<T, Constant>(data: T, c: Constant): Foo<T, Constant>;\ndeclare function foo<T, Constant>(c: Constant): (data: T) => Foo<T, Constant>;\n\ndeclare function sillyFoo<T, Constant>(\n  data: T,\n  c: Constant,\n): SillyFoo<T, Constant>;\ndeclare function sillyFoo<T, Constant>(\n  c: Constant,\n): (data: T) => SillyFoo<T, Constant>;\n    "},
		{Code: "\nconst f = <T,>(setValue: (v: T) => void, getValue: () => NoInfer<T>) => {};\n    "},
		{Code: "\nconst f = <T,>(\n  setValue: (v: T) => NoInfer<T>,\n  getValue: (v: NoInfer<T>) => NoInfer<T>,\n) => {};\n    "},
	}, []rule_tester.InvalidTestCase{
		{Code: "const func = <T,>(param: T) => null;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "const func = (param: unknown) => null;"}}}}},
		{Code: "const func = <T,>(param: [T]) => null;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "const func = (param: [unknown]) => null;"}}}}},
		{Code: "const func = <T,>(param: T[]) => null;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "const func = (param: unknown[]) => null;"}}}}},
		{Code: "const f1 = <T,>(): T => {};", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "const f1 = (): unknown => {};"}}}}},
		{Code: "\n        interface I {\n          <T>(value: T): void;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        interface I {\n          (value: unknown): void;\n        }\n      "}}}}},
		{Code: "\n        interface I {\n          m<T>(x: T): void;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        interface I {\n          m(x: unknown): void;\n        }\n      "}}}}},
		{Code: "\n        class Joiner<T extends string | number> {\n          join(el: T, other: string) {\n            return [el, other].join(',');\n          }\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        class Joiner {\n          join(el: string | number, other: string) {\n            return [el, other].join(',');\n          }\n        }\n      "}}}}},
		{Code: "\n        declare class C<V> {}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare class C {}\n      "}}}}},
		{Code: "\n        declare class C<T, U> {\n          method(param: T): U;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare class C<U> {\n          method(param: unknown): U;\n        }\n      "}}}, {MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare class C<T> {\n          method(param: T): unknown;\n        }\n      "}}}}},
		{Code: "\n        declare class C {\n          method<T, U>(param: T): U;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare class C {\n          method<U>(param: unknown): U;\n        }\n      "}}}, {MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare class C {\n          method<T>(param: T): unknown;\n        }\n      "}}}}},
		{Code: "\n        declare class C {\n          prop: <P>() => P;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare class C {\n          prop: () => unknown;\n        }\n      "}}}}},
		{Code: "\n        declare class Foo {\n          foo<T>(this: T): void;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare class Foo {\n          foo(this: unknown): void;\n        }\n      "}}}}},
		{Code: "\n        function third<A, B, C>(a: A, b: B, c: C): C {\n          return c;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function third<B, C>(a: unknown, b: B, c: C): C {\n          return c;\n        }\n      "}}}, {MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function third<A, C>(a: A, b: unknown, c: C): C {\n          return c;\n        }\n      "}}}}},
		{Code: "\n        function foo<T>(_: T) {\n          const x: T = null!;\n          const y: T = null!;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function foo(_: unknown) {\n          const x: unknown = null!;\n          const y: unknown = null!;\n        }\n      "}}}}},
		{Code: "\n        function foo<T>(_: T): void {\n          const x: T = null!;\n          const y: T = null!;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function foo(_: unknown): void {\n          const x: unknown = null!;\n          const y: unknown = null!;\n        }\n      "}}}}},
		{Code: "\nfunction foo<T>(_: T): <T>(input: T) => T {\n  const x: T = null!;\n  const y: T = null!;\n  return null!;\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\nfunction foo(_: unknown): <T>(input: T) => T {\n  const x: unknown = null!;\n  const y: unknown = null!;\n  return null!;\n}\n      "}}}}},
		{Code: "\n        function foo<T>(_: T) {\n          function withX(): T {\n            return null!;\n          }\n          function withY(): T {\n            return null!;\n          }\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function foo(_: unknown) {\n          function withX(): unknown {\n            return null!;\n          }\n          function withY(): unknown {\n            return null!;\n          }\n        }\n      "}}}}},
		{Code: "\n        function parseYAML<T>(input: string): T {\n          return input as any as T;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function parseYAML(input: string): unknown {\n          return input as any as unknown;\n        }\n      "}}}}},
		{Code: "\n        function printProperty<T, K extends keyof T>(obj: T, key: K) {\n          console.log(obj[key]);\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function printProperty<T>(obj: T, key: keyof T) {\n          console.log(obj[key]);\n        }\n      "}}}}},
		{Code: "\n        function fn<T>(param: string) {\n          let v: T = null!;\n          return v;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function fn(param: string) {\n          let v: unknown = null!;\n          return v;\n        }\n      "}}}}},
		{Code: "\n        function both<\n          Args extends unknown[],\n          CB1 extends (...args: Args) => void,\n          CB2 extends (...args: Args) => void,\n        >(fn1: CB1, fn2: CB2): (...args: Args) => void {\n          return function (...args: Args) {\n            fn1(...args);\n            fn2(...args);\n          };\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function both<\n          Args extends unknown[],\n          CB2 extends (...args: Args) => void,\n        >(fn1: (...args: Args) => void, fn2: CB2): (...args: Args) => void {\n          return function (...args: Args) {\n            fn1(...args);\n            fn2(...args);\n          };\n        }\n      "}}}, {MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function both<\n          Args extends unknown[],\n          CB1 extends (...args: Args) => void,\n        >(fn1: CB1, fn2: (...args: Args) => void): (...args: Args) => void {\n          return function (...args: Args) {\n            fn1(...args);\n            fn2(...args);\n          };\n        }\n      "}}}}},
		{Code: "\n        function getLength<T extends { length: number }>(x: T) {\n          return x.length;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        function getLength(x: { length: number }) {\n          return x.length;\n        }\n      "}}}}},
		{Code: "\n        interface Lengthy {\n          length: number;\n        }\n        function getLength<T extends Lengthy>(x: T) {\n          return x.length;\n        }\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        interface Lengthy {\n          length: number;\n        }\n        function getLength(x: Lengthy) {\n          return x.length;\n        }\n      "}}}}},
		{Code: "declare function get<T>(): unknown;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get(): unknown;"}}}}},
		{Code: "declare function get<T>(): T;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get(): unknown;"}}}}},
		{Code: "declare function get<T extends object>(): T;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get(): object;"}}}}},
		{Code: "declare function take<T>(param: T): void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function take(param: unknown): void;"}}}}},
		{Code: "declare function take<T extends object>(param: T): void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function take(param: object): void;"}}}}},
		{Code: "declare function take<T, U = T>(param1: T, param2: U): void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function take<T>(param1: T, param2: unknown): void;"}}}}},
		{Code: "declare function take<T, U extends T>(param: T): U;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function take<T>(param: T): T;"}}}}},
		{Code: "declare function take<T, U extends T>(param: U): U;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function take<U extends unknown>(param: U): U;"}}}}},
		{Code: "declare function get<T, U = T>(param: U): U;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get<U = unknown>(param: U): U;"}}}}},
		{Code: "declare function get<T, U extends T = T>(param: T): U;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get<T>(param: T): T;"}}}}},
		{Code: "declare function compare<T, U extends T>(param1: T, param2: U): boolean;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function compare<T>(param1: T, param2: T): boolean;"}}}}},
		{Code: "declare function get<T>(param: <U, V>(param: U) => V): T;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get(param: <U, V>(param: U) => V): unknown;"}}}, {MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get<T>(param: <V>(param: unknown) => V): T;"}}}, {MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get<T>(param: <U>(param: U) => unknown): T;"}}}}},
		{Code: "declare function get<T>(param: <T, U>(param: T) => U): T;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Line: 1, Column: 22, EndColumn: 23, Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get(param: <T, U>(param: T) => U): unknown;"}}}, {MessageId: "sole", Column: 33, EndColumn: 34, Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get<T>(param: <U>(param: unknown) => U): T;"}}}, {MessageId: "sole", Column: 36, EndColumn: 37, Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function get<T>(param: <T>(param: T) => unknown): T;"}}}}},
		{Code: "declare function makeReadonlyArray<T>(): readonly T[];", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function makeReadonlyArray(): readonly unknown[];"}}}}},
		{Code: "declare function makeReadonlyTuple<T>(): readonly [T];", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function makeReadonlyTuple(): readonly [unknown];"}}}}},
		{Code: "declare function makeReadonlyTupleNullish<T>(): readonly [T | null];", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function makeReadonlyTupleNullish(): readonly [unknown | null];"}}}}},
		{Code: "declare function takeArray<T>(input: T[]): void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function takeArray(input: unknown[]): void;"}}}}},
		{Code: "declare function takeArrayNullish<T>(input: (T | null)[]): void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function takeArrayNullish(input: (unknown | null)[]): void;"}}}}},
		{Code: "declare function takeTuple<T>(input: [T]): void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function takeTuple(input: [unknown]): void;"}}}}},
		{Code: "declare function takeTupleMultiUnrelated<T>(input: [T, number]): void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "declare function takeTupleMultiUnrelated(input: [unknown, number]): void;"}}}}},
		{Code: "\n        declare function takeTupleMultiUnrelatedNullish<T>(\n          input: [T | null, null],\n        ): void;\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare function takeTupleMultiUnrelatedNullish(\n          input: [unknown | null, null],\n        ): void;\n      "}}}}},
		{Code: "type Fn = <T>() => T;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Fn = () => unknown;"}}}}},
		{Code: "type Fn = <T>() => [];", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Fn = () => [];"}}}}},
		{Code: "\n        type Other = 0;\n        type Fn = <T>() => Other;\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        type Other = 0;\n        type Fn = () => Other;\n      "}}}}},
		{Code: "\n        type Other = 0 | 1;\n        type Fn = <T>() => Other;\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        type Other = 0 | 1;\n        type Fn = () => Other;\n      "}}}}},
		{Code: "type Fn = <U>(param: U) => void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Fn = (param: unknown) => void;"}}}}},
		{Code: "type Ctr = new <T>() => T;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Ctr = new () => unknown;"}}}}},
		{Code: "type Fn = <T>() => { [K in keyof T]: K };", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Fn = () => { [K in keyof unknown]: K };"}}}}},
		{Code: "type Fn = <T>() => { [K in 'a']: T };", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Fn = () => { [K in 'a']: unknown };"}}}}},
		{Code: "type Fn = <T>(value: unknown) => value is T;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Fn = (value: unknown) => value is unknown;"}}}}},
		{Code: "type Fn = <T extends string>() => `a${T}b`;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Fn = () => `a${string}b`;"}}}}},
		{Code: "\n        declare function mapObj<K extends string, V>(\n          obj: { [key in K]?: V },\n          fn: (key: K) => number,\n        ): number[];\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\n        declare function mapObj<K extends string>(\n          obj: { [key in K]?: unknown },\n          fn: (key: K) => number,\n        ): number[];\n      "}}}}},
		{Code: "\ndeclare function setItem<T>(T): T;\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\ndeclare function setItem(T): unknown;\n      "}}}}},
		{Code: "\ninterface StorageService {\n  setItem<T>(input: { key: string, value: T }): Promise<void>;\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\ninterface StorageService {\n  setItem(input: { key: string, value: unknown }): Promise<void>;\n}\n      "}}}}},
		{Code: "type Fn = <T extends keyof T>() => void;", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "type Fn = () => void;"}}}}},
		{Code: "\ntype Compute<A> = A extends Function ? A : { [K in keyof A]: Compute<A[K]> };\ntype Equal<X, Y> =\n  (<T1>() => T1 extends Compute<X> ? 1 : 2) extends\n    (<T2>() => T2 extends Compute<Y> ? 1 : 2)\n  ? true\n  : false;\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\ntype Compute<A> = A extends Function ? A : { [K in keyof A]: Compute<A[K]> };\ntype Equal<X, Y> =\n  (() => unknown extends Compute<X> ? 1 : 2) extends\n    (<T2>() => T2 extends Compute<Y> ? 1 : 2)\n  ? true\n  : false;\n      "}}}, {MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\ntype Compute<A> = A extends Function ? A : { [K in keyof A]: Compute<A[K]> };\ntype Equal<X, Y> =\n  (<T1>() => T1 extends Compute<X> ? 1 : 2) extends\n    (() => unknown extends Compute<Y> ? 1 : 2)\n  ? true\n  : false;\n      "}}}}},
		{Code: "\nfunction f<T extends any>(x: T): void {\n  // @ts-expect-error\n  x.notAMethod();\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\nfunction f(x: unknown): void {\n  // @ts-expect-error\n  x.notAMethod();\n}\n      "}}}}},
		{Code: "\nclass Joiner {\n  join<T extends number>(els: T[]) {\n    return els.map(el => '' + el).join(',');\n  }\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\nclass Joiner {\n  join(els: number[]) {\n    return els.map(el => '' + el).join(',');\n  }\n}\n      "}}}}},
		{Code: "\nfunction join<T extends string | number>(els: T[]) {\n  return els.map(el => '' + el).join(',');\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\nfunction join(els: (string | number)[]) {\n  return els.map(el => '' + el).join(',');\n}\n      "}}}}},
		{Code: "\nfunction join<T extends string & number>(els: T[]) {\n  return els.map(el => '' + el).join(',');\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\nfunction join(els: (string & number)[]) {\n  return els.map(el => '' + el).join(',');\n}\n      "}}}}},
		{Code: "\nfunction join<T extends (string & number) | boolean>(els: T[]) {\n  return els.map(el => '' + el).join(',');\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\nfunction join(els: ((string & number) | boolean)[]) {\n  return els.map(el => '' + el).join(',');\n}\n      "}}}}},
		{Code: "\nfunction join<T extends (string | number)>(els: T[]) {\n  return els.map(el => '' + el).join(',');\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\nfunction join(els: (string | number)[]) {\n  return els.map(el => '' + el).join(',');\n}\n      "}}}}},
		{Code: "\nfunction join<T extends { hoge: string } | { hoge: number }>(els: T['hoge'][]) {\n  return els.map(el => '' + el).join(',');\n}\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\nfunction join(els: ({ hoge: string } | { hoge: number })['hoge'][]) {\n  return els.map(el => '' + el).join(',');\n}\n      "}}}}},
		{Code: "\ntype A = string;\ntype B = string;\ntype C = string;\ndeclare function f<T extends A | B>(): T & C;\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\ntype A = string;\ntype B = string;\ntype C = string;\ndeclare function f(): (A | B) & C;\n      "}}}}},
		{Code: "\ntype A = string;\ntype B = string;\ntype C = string;\ntype D = string;\ndeclare function f<T extends A extends B ? C : D>(): T | null;\n      ", Errors: []rule_tester.InvalidTestCaseError{{MessageId: "sole", Suggestions: []rule_tester.InvalidTestCaseSuggestion{{MessageId: "replaceUsagesWithConstraint", Output: "\ntype A = string;\ntype B = string;\ntype C = string;\ntype D = string;\ndeclare function f(): (A extends B ? C : D) | null;\n      "}}}}},
	})
}
